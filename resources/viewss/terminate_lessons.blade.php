@extends('layouts.app')@section('title') Terminate Student  @endsection
<style>
.ibox-content p{
	
	line-height: 2;
    margin: 2px 14px 10px 11px;
}
.ibox {
	
    margin-bottom: 0px !important;
}
.floatLeft{	float:left;}.question{	}.q-1,.q-2{	width:100%;}.mb-10{	margin-bottom:10px;}.qa-2-section,.error,.qa-3-section,.qa-4-section,.qa-5-section,.Retention_Warning{	display:none;}.Retention_Warning,.error{	color: #a94442;}
</style>
@section('content')
<div id="wrapper">	<div class="wrapper wrapper-content">		<div class="row"> 			 <div class="col-lg-10"></div>		</div>		<div class="row"> 						<div class="col-lg-10">	  <div class="ibox float-e-margins">		<div class="ibox-title">			<h5>Student Stopping Lessons Indicator</h5>		</div>		<div class="ibox-content">			 <form id="dataDisplay" name="dataDisplay" method="post" action="{{url('confirmation')}}">		 {{csrf_field()}}				 <div class="row mb-10">			  <div class="col-sm-12">			   <div class="col-xs-12 col-md-12">				<p class="question floatLeft">What student wishes to stop lessons?</p>											   </div>			<div class="col-xs-12 col-md-12">				<p>				<select id="alterId" name="alterId" class="form-control floatLeft q-1-studentdrp" style="max-width: 180px;">					  <option data-total-record="" value=''>--Select Student--</option>					  @foreach($termiante_students as $terminate)					  <option data-total-record="{{$terminate->lcount}}" value="{{$terminate->admissionId}}" @if(isset($student_id)) @if($student_id==$terminate->admissionId) selected @endif @endif ><strong>{{$terminate->name->firstName}} {{$terminate->name->lastName}}</strong></option>							  @endforeach						</select>				</p>							</div>							</div>	     </div>		 		 <div  class="row mb-10 qa-2-section">		 <div class="col-sm-12">			   <div class="col-xs-12 col-md-12">				<p class="q-2-stuname floatLeft"><p></p>			   </div>			   <div class="col-xs-12 col-md-12">					<p> 					<input value="yes" class="q-2-chkbx" name="teachesHome" id="teachesHome"  type="radio"> Yes					<input value="no" class="q-2-chkbx" name="teachesHome" id="teachesHome" type="radio"> No 					</p>					<p class="error">You must enter all lessons taught before you can proceed.</p>			   </div>	     </div>		 </div>		 		 		 <div  class="row mb-10 qa-3-section">		 <div class="col-sm-12">			   <div class="col-xs-12 col-md-12">					<p class="q-3-stuname"></p>					<p class="total_lesson">Total Lessons Logged for this student: [<span id='lnums'>6</span> lessons]</p>					<p class="Retention_Warning">Retention Warning: The average Musika student takes 50 lessons before stopping. You taught <span id='lnums'>6</span> lessons which is <span id='lless'>144</span> lessons less than average.</p>										<p>Note: Retention is one of the most important aspects in teaching with Musika. Depending on the circumstances, repeated low retention rates may result in lower priority for student matches. For tips on keeping students engaged in lessons please see here.</p>			   </div>			   <div class="col-xs-12 col-md-12">								   </div>	     </div>		 </div>		 		 		 		 <div  class="row mb-10 qa-4-section">		 <div class="col-sm-12">			   <div class="col-xs-12 col-md-12">					<p>Please provide a detailed reason(s) as to why this student is stopping lessons</p>								   </div>			   <div class="col-xs-12 col-md-12">					<p><input type="text" required="" id="reason" class="form-control" name="reason"/></p>			   </div>	     </div>		 </div>		 		  		   		 <div class="row mb-10">			<div class="col-sm-12">				<div class="col-xs-12 col-md-12 qa-5-section">					<p> <input id="confirm_terminate" type="checkbox">&nbsp;  I <strong>{{$user->firstName}} {{$user->lastName}}</strong> acknowledge my already signed contractual obligation that states, if I circumvent Musika and teach <strong class="akstudent_name"></strong> or family member(s) of this student outside of the Musika program for one or more lesson(s) during my time with Musika and 2 years after I stop teaching with Musika, that I am legally and contractually required to pay a $5,000 acquisition fee to Musika. I understand that this student will be regularly checked & tracked by Musika's fraud department. I further understand that Musika will pursue legal action immediately, if I fail to pay the acquisition fee.</p>				</div>          		  </div>		 </div>											 <div  class="row mb-10">		 <div class="col-sm-12">			   <div class="col-xs-12 col-md-12">					<p class="text-center"><button class="btn btn-primary" type="submit" id="tSubmit"><strong>Save</strong></button></p>								   </div>	     </div>		 </div>		 <input name="student_name" id="student_name" type="hidden" value="" />			</form>					</div>	  </div>   </div>      		</div>	</div></div>
@endsection

@section('scripts')
<script type="text/javascript">

$(function() {

   $('#tSubmit').click( function() {	   if( $('#alterId').val() == '' ) {                alert('You must select a student name from the drop down menu.')				return false;		}		
		if($('.q-2-chkbx').is(":checked")==false){			alert('You must specify if you have taught lesson to this student.')				return false;		}				if($('.q-2-chkbx').is(":checked")==true && $('.q-2-chkbx:checked').val()=='no'){			alert('You must teach atleast one lesson to the student.')				return false;		}						if( $.trim($('#reason').val()) == '' && $('.q-2-chkbx').is(":checked")==true && $('.q-2-chkbx:checked').val()=='yes' ) {		   alert('You must provide reason, why student is stopping lessons.')		   return false;		}	   	   	   if($('.q-2-chkbx').is(":checked")==true && $('.q-2-chkbx:checked').val()=='yes'){		  if ( $('#confirm_terminate').is(':checked') ) { 				if( $('#alterId').val() == '' ) {					alert('You must select a student name from the drop down menu.');					return false;				} else {   				   // $('#dataDisplay').submit(); 				}		   } else {				 alert('You must acknowledge your already signed contractual obligation by checking the box.'); 				 return false;		   } 	   }	   
       	   	   
    });
});
$('.q-1-studentdrp').on('change',function(e){	$('.qa-3-section').hide();	$('.qa-4-section').hide();	$('.qa-5-section').hide();	$(".q-2-chkbx").each(function(e){        $(this).prop("checked", false);    });	$('.qa-2-section').find('.error').hide();		if($(this).val()!=""){		$('.qa-2-section').show();				var stuname = $(this).find('option:selected').text();		var lcount = $(this).find('option:selected').attr('data-total-record');		$("#lnums").text(lcount);		$("#lless").text(50 - lcount);		var text = 'Have you logged all the lessons taught for <strong>'+stuname+'</strong>' ;		$('.q-2-stuname').html(text);				$("#student_name").attr('value',stuname);				$(".akstudent_name").html(stuname);			}else{		$('.qa-2-section').hide();					}});$('.q-2-chkbx').on('click',function(e){	if($(this).val()=="no"){		$('.qa-2-section').find('.error').show();		$('.qa-3-section').hide();		$('.qa-4-section').hide();		$('.qa-5-section').hide();			}else{		$('.qa-2-section').find('.error').hide();				var total_record = $('.q-1-studentdrp').find('option:selected').attr("data-total-record");		var total = 'Total Lessons Logged for this student: ['+total_record+' lessons]';			$('.qa-3-section').find('total_record').html(total);							if(parseInt(total_record)<35){						$('.qa-3-section').find(".Retention_Warning").show();								}else{			$('.qa-3-section').find(".Retention_Warning").hide()		}				$('.qa-3-section').show();		$('.qa-4-section').show();		$('.qa-5-section').show();	}})
</script>
@endsection

