@extends('layouts.app')@section('title') Prospective Students  @endsection@section('custom_css')<link rel="stylesheet" href="{{asset('css/jquery-confirm.min.css')}}"><style>.text-center1 {    margin-left: 262px;}/*b, strong {    font-weight: 600;}*/.nbl {    margin-top: 13px;}.number-only { 	padding: 2px!important; }.profile_btn {    margin-left: 40px;}.ibox.float-e-margins {    position: relative;}.overlay {    background: rgba(0, 0, 0, 0.5) none repeat scroll 0 0;    height: 100%;    left: 0;    position: absolute;    top: 0;    width: 100%;}.submit_btn {	background: #00aeef none repeat scroll 0 0;	border: 0 none;	color: #fff;	cursor: pointer;	display: inline-block;	font-size: 18px;	font-weight: 400;	line-height: 19px;	padding: 12px 20px;	position: relative;	text-align: center;	text-decoration: none;	text-transform: uppercase;}.navbar-fixed-bottom {	border-width: 1px 0 0;	bottom: 0;	margin-bottom: 0;}.savebutton {	 margin-right: 0;	padding-top: 25px;	text-align: center;}.table > tbody > tr > td{	padding: 5px 5px;}@media screen and (max-width: 767px).table-responsive > .table > thead > tr > th, .table-responsive > .table > tbody > tr > th, .table-responsive > .table > tfoot > tr > th, .table-responsive > .table > thead > tr > td, .table-responsive > .table > tbody > tr > td, .table-responsive > .table > tfoot > tr > td {    white-space: unset !important;} .loader-modal{	position: fixed;	z-index: 999;	height: 100%;	width: 100%;	top: 0;	left: 0;	background-color: Black;	filter: alpha(opacity=60);	opacity: 0.6;	-moz-opacity: 0.8;}.loader-modal .center{	z-index: 1000;	margin: 300px auto;	padding: 10px;	width: 80px;	background-color: White;	border-radius: 10px;	filter: alpha(opacity=100);	opacity: 1;	-moz-opacity: 1;}.loader-modal .center img{	height: 60px;	width: 60px;}@media screen and (max-width: 480px) and (min-width: 320px){	.personal tr td {		padding: 8px 4px !important;		vertical-align: top;	}}</style>@endsection @section('content')<?php //if(isset($input_data)){print_r($input_data);} ?><div class="row wrapper border-bottom white-bg page-heading">   <div class="col-sm-10">      <h2>Search Prospective Students</h2>	  <small>This page is constantly changing! The last action was taken {{date('m/d/Y')}}. As new students make requests and are placed with our contracted teachers, this page will change. </small>   </div></div><div class="wrapper wrapper-content animated fadeInRight">   <div class="row">				@if ($errors->any())					<div class="alert alert-danger">						<ul>							@foreach ($errors->all() as $error)								<li>{{ $error }}</li>							@endforeach						</ul>					</div>				@endif				@if (session('status'))                    <div class="alert alert-danger">                        {{ session('status') }}<br>                    </div>                @endif								@if($profile_completenss=='Incomplete')					<div class="alert alert-danger">					<ul>						<li>Your profile is Incomplete. Please complete your profile before you search prospective students. <span class="profile_btn"><a href="{{route('profile')}}" class="btn btn-primary loading open-circle">Update Profile</a></span></li>					</ul>				</div>				@endif      <form class="form-horizontal" name="frmPStudents" id="frmPStudents" action="{{route('searchProspective')}}" method="post">         {{csrf_field()}}         <div class="col-lg-12 section_dis">		 <div class="section_disable">	            <div class="ibox float-e-margins">               <div class="ibox-title">               </div>               <div class="ibox-content"><div class="form-group">	<label class="col-sm-2 control-label">Select Instrument(s)</label>		<div class="col-sm-8">			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="1" @if (isset($input_data['lstInstr']) && in_array(1, $input_data['lstInstr'])) checked @endif />Bass</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="3" @if (isset($input_data['lstInstr']) && in_array(3, $input_data['lstInstr'])) checked @endif />Cello</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="4" @if (isset($input_data['lstInstr']) && in_array(4, $input_data['lstInstr'])) checked @endif />Clarinet</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="5" @if (isset($input_data['lstInstr']) && in_array(5, $input_data['lstInstr'])) checked @endif />Drums</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="6" @if (isset($input_data['lstInstr']) && in_array(6, $input_data['lstInstr'])) checked @endif />Flute</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="8" @if (isset($input_data['lstInstr']) && in_array(8, $input_data['lstInstr'])) checked @endif />Guitar</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="10" @if (isset($input_data['lstInstr']) && in_array(10, $input_data['lstInstr'])) checked @endif />Piano</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="11" @if (isset($input_data['lstInstr']) && in_array(11, $input_data['lstInstr'])) checked @endif />Saxophone</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="12" @if (isset($input_data['lstInstr']) && in_array(12, $input_data['lstInstr'])) checked @endif />Trombone</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="13" @if (isset($input_data['lstInstr']) && in_array(13, $input_data['lstInstr'])) checked @endif />Trumpet</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="14" @if (isset($input_data['lstInstr']) && in_array(14, $input_data['lstInstr'])) checked @endif />Viola</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="15" @if (isset($input_data['lstInstr']) && in_array(15, $input_data['lstInstr'])) checked @endif />Violin</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="16" @if (isset($input_data['lstInstr']) && in_array(16, $input_data['lstInstr'])) checked @endif />Voice</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="25" @if (isset($input_data['lstInstr']) && in_array(25, $input_data['lstInstr'])) checked @endif />Mandolin</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="29" @if (isset($input_data['lstInstr']) && in_array(29, $input_data['lstInstr'])) checked @endif />Banjo</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="40" @if (isset($input_data['lstInstr']) && in_array(40, $input_data['lstInstr'])) checked @endif />Harmonica</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="48" @if (isset($input_data['lstInstr']) && in_array(48, $input_data['lstInstr'])) checked @endif />Ukulele</label></div>			<div class="col-md-2"><label class="checkbox-inline"><input type="checkbox" name="lstInstr[]" value="51" @if (isset($input_data['lstInstr']) && in_array(51, $input_data['lstInstr'])) checked @endif />Accordion</label></div>		</div></div><div class="hr-line-dashed"></div>	<div class="form-group">	<label class="col-sm-2 control-label">Select Lessons Location</label>		<div class="col-sm-10">		<div class="col-md-10" style="width: 100%;">	<label class="nbl"><input name="s_location[]" class="chkit" id="s_location" value="0" type="checkbox" style="margin: 4px 4px 0 0;"  @if (isset($input_data['s_location']) && in_array(0, $input_data['s_location'])) checked @endif >		 In student's home within 			&nbsp; <select id="s_location_miles" class="number-only" name="s_location_miles" style="width:60px;" class="choicebox">   				@for ($i = 1; $i < 101; $i++)				<option @if(isset($input_data['s_location_miles']) && $input_data['s_location_miles']==$i) selected @endif value="{{ $i }}">{{ $i }}</option>				@endfor        </select> &nbsp; miles of zip code &nbsp; <input size="6" name="s_zip" id="s_zip" value="{{ $input_data['s_zip'] or '' }}" class="number-only" placeholder="Zip Code" type="text"  /><span id="s_ziperrmsg" style="display: none;padding-left:5px">Digits Only</span> </label></div><div class="col-md-10">		<label class="nbl"><input class="chkit" name="s_location[]" id="s_location" value="1" type="checkbox" style="margin: 4px 4px 0 0;" @if (isset($input_data['s_location']) && in_array(1, $input_data['s_location'])) checked @endif > At my location/studio in zip code &nbsp; <input name="s_location_zipt" id="s_location_zipt" value="{{ $input_data['s_location_zipt'] or '' }}" size="6" class="number-only" placeholder="Zip Code" type="text"><span id="s_location_zipterrmsg" style="display: none;padding-left:5px">Digits Only</span></label></div><div class="col-md-10"><label class="nbl"><input class="chkit" name="s_location[]" id="s_location" value="2" type="checkbox" style="margin: 4px 4px 0 0;" @if (isset($input_data['s_location']) && in_array(2, $input_data['s_location'])) checked @endif > Online</label></div>	</div>		</div>			<div class="form-group">		<label class="col-sm-2 control-label"></label>		<div class="col-sm-10">		<div class="col-md-10">		<span><small>Loading of records may take some time after clicking search. Please be patient.</small></span>		</div>		</div>		</div>		<div class="form-group">	<label class="col-sm-2 control-label"></label>		<div class="col-sm-10">		@if($profile_completenss=='Incomplete')				<!--<p style="color:red">Your profile is Incomplete. Please complete your profile before you search prospective students.</p>-->		@else			<div class="col-md-5">			<input type="hidden" name="profile_status" id="profile_status" value="{{$profile_completenss}}" />			<input type="submit" class="btn btn-primary loading open-circle load_button" value="Search">			</div>		@endif			</div>		</div>		<div class="form-group">			 <!--<small> Please select at least one instrument. Please choose lesson location and enter travel distance and zip code if required.</small>	-->		</div>		</div>		@if($profile_completenss=='Incomplete')			<div class="overlay"> </div>		@endif  </div>   </div></div></form></div><!-- {if not $smarty.get.override}teachers/sr_request.php{else}cms.php?page=teacher_request_student{/if}-->@if(isset($metros))<div id="div-focus">	<form action="{{route('prospectives_request')}}" id="frmStudents" name="frmStudents" method="post" onsubmit="return validate_request(this);">{{csrf_field()}}	@if(!empty($metros))		<div class ="row paddingzero">			<!--<div class="col-sm-12">				<div class="ibox float-e-margins">					<div class="ibox-content">					<span style="font-weight: 700;">You can select up to 5 students </span> 					</div>				</div>			</div>-->			<div class="col-sm-12">				<div class="ibox float-e-margins">					<div class="ibox-content">						<div class="table-responsive" style="overflow-x: hidden;">							<!--<table class="table table-striped">-->			<table class="table table-striped">				<tbody class="personal">				<input type="hidden" name="student_length" id="student_length" >				@php $row_cnt = 1; @endphp				@foreach($metros['CSTUDENTS'] as $students)					@php 					$cnt=1; 					if($row_cnt % 2 == 0){						 $color = "FFFFFF";					}					else					{						 $color = "d7e2ed";					}					@endphp					@foreach($students as $data)										@if(isset($input_data['s_location']) and count($input_data['s_location']) == 1 and $input_data['s_location'][0]==2 and $data['lessonLoc_choice1']!=2)						@continue;					@endif										@php $home_txt = ""; $studio_text = ""; $online_text = "";  @endphp					@if($data['is_home'])						@if ($data['is_both'])							@php $home_txt = "At ";  @endphp						@else							@php $home_txt .= "<strong>ONLY</strong> at ";  @endphp						@endif						@php							$zcode = str_pad($data['zipCode'], 5, '0', STR_PAD_LEFT);							$stu_address = $data['tmp_address']." ".$data['city'].",  ".$data['stateId']." ".str_pad($data['zipCode'], 5, '0', STR_PAD_LEFT);							$dist_sentence = $data['home_text'];														$home_txt .= "student's home in <a href='https://maps.google.com/?q=$zcode&z=5' target='_blank' style='text-decoration: underline; color:#002366;'>$stu_address</a>. </br> ($dist_sentence)";						@endphp						@endif					@if ($data['is_studio'])						@if($data['is_both'])							@php $studio_text = "At ";  @endphp						@else							@php $studio_text .= "<strong>ONLY</strong> at ";  @endphp						@endif						@php							$studio_dist = $data['studio_distance'];							$studio_zip = $data['studio_zip'];							$studio_sentence = $data['studio_txt'];														$studio_text .= "teachers's home or studio within $studio_dist miles of <a href='https://maps.google.com/?q=$studio_zip&z=5' target='_blank' style='text-decoration: underline; color:#002366;'>$studio_zip</a> (Musika does not provide teaching facilities).</br> ($studio_sentence)";						@endphp						@endif										@if($data['is_online'])						@php $online_text = "Online"; @endphp					@endif					@php 						$arr_location = [$home_txt,$studio_text,$online_text];					@endphp					@if(trim($data['studentNotes'])!="")						@php $row_no = 8; @endphp					@else						@php $row_no = 7; @endphp					@endif						<input type="hidden" name="std{{$data['studentId']}}" value="{{$data['studentId']}}" />					<tr style="background:#{{$color}}">						@if($cnt==1 and $cnt < count($students))							@php	$rowspan_cnt = count($students)*$row_no; @endphp							<td> <strong>Select</strong> <input class="chkit" name="chkStudentId[]"  value="{{$data['idNum']}}" type="checkbox"></br> </td>						@elseif($cnt==1 and $cnt == count($students))							<td align="center"> <strong>Select</strong><input class="chkit" name="chkStudentId[]"  value="{{$data['studentId']}}" type="checkbox" onclick="selectedStudents();"></br> </td>						@endif						@php $cnt++; @endphp											<td><strong>ID#</strong></td>						<td> {{$data['idNum']}}</td>					</tr>					<tr style="background:#{{$color}}">						<td rowspan="{{count($students)*$row_no}}"></td>						<td><strong>Level</strong></td>						<td>{{$data['iLevel']}}</td>					</tr>					<tr style="background:#{{$color}}">						<td><strong>Instrument</strong></td>						<td> {{$data['instrument_name']}}</td>					</tr>					<tr style="background:#{{$color}}">						<td><strong>Entered On</strong></td>						<td>@php echo date('F d,Y', $data['entered_on']).' '; @endphp </td>					</tr>					<tr style="background:#{{$color}}">						<td><strong>Age </strong></td>						<td>@if($data['age']!='adult'){{$data['age']}} yrs. @else {{$data['age']}}@endif</td>					</tr>					<tr style="background:#{{$color}}">						<td><strong>Lesson Location</strong></td>						<td>						@if($data['lessonLoc_choice1']!='')									@php								$ch1 = $data['lessonLoc_choice1'];								echo "<strong>1st Choice:</strong> ".$arr_location[$ch1]; 							@endphp						@endif							</br>						@if($data['lessonLoc_choice2']!='')									@php								$ch2 = $data['lessonLoc_choice2'];								echo "<strong>2nd Choice:</strong> ".$arr_location[$ch2]; 							@endphp						@endif						</br>						@if($data['lessonLoc_choice3']!='')									@php								$ch3 = $data['lessonLoc_choice3'];								echo "<strong>3rd Choice:</strong> ".$arr_location[$ch3]; 							@endphp						@endif						</td>					</tr>					<tr style="background:#{{$color}}">						<td><strong>Lesson Duration </strong></td>						<td>{{$data['lessonLen']}}</td>					</tr>					@if(trim($data['studentNotes'])!="")					<tr style="background:#{{$color}}">						<td><strong>Special Notes </strong></td>						<td>{{$data['studentNotes']}}</td>					</tr>					@endif					<tr style="background:#{{$color}}">						<td><strong>Available Start Times</strong></td>						<td>@if ($data['lessonStartMon']!="") 								Mon ({{$data['lessonStartMon']}}),@endif 							@if ($data['lessonStartTue']!="")								Tues ({{$data['lessonStartTue']}}), @endif							@if ($data['lessonStartWed']!="")								Wed ({{$data['lessonStartWed']}}), @endif 							@if ($data['lessonStartThu']!="")								Thurs ({{$data['lessonStartThu']}}), @endif 							@if ($data['lessonStartFri']!="")								Fri ({{$data['lessonStartFri']}}), @endif							@if ($data['lessonStartSat']!="")								Sat ({{$data['lessonStartSat']}}), @endif							@if ($data['lessonStartSun']!="")								Sun ({{$data['lessonStartSun']}}) @endif 						</td>					</tr>					@endforeach	<?php $row_cnt++;?>					@endforeach				</tbody>			</table>			<br><br>														 						</div> 					 </div> 				 </div> 			 </div>			<div class="col-sm-12">								<!--<div class="ibox float-e-margins">					<div class="ibox-content">						<input type="submit" class="btn btn-primary loading open-circle" value="Request selected students"> 					</div>				</div>-->				</div>			</div>			@else		<div class ="row paddingzero">			<div class="col-sm-12">				<div class="ibox float-e-margins">					<div class="ibox-content">							<p><label>No student are currently available to match this search. Try again by increasing your range, try different instruments or lesson locations.</label></p>					</div>				</div>			</div>		</div>		@endif		</form></div>	@endif		 </div>@if(isset($metros) && !empty($metros)) @php $search_students = 1; @endphp		<div class="col-sm-12">		<nav class="navbar navbar-fixed-bottom" role="navigation" style="min-height:50px;background-color:transparent; margin-bottom:5px;">			<div class="savebutton"><button type="button" id="request_students" class="submit_btn" >Request selected students</button></div>		</nav>	</div>@else	@php $search_students = 0; @endphp@endif<div class="loader-modal" style="display: none">	<div class="center">		<img alt="" src="{{asset('img/ajax-loader2.gif')}}" />	</div></div>@endsection@section('custom_js')<script src="{{asset('js/jquery-confirm.min.js')}}"></script><script type="text/javascript">   /*  $('#frmPStudents').submit(function() {        $(".loader-modal").show();        return true;    }); */</script><script>$(document).ready(function(){console.log(screen.width);	if(screen.width>375){		$(".table-striped").addClass("table");	}else{		$(".table-striped").removeClass("table");		$(".table-striped").addClass("table-new");	}			var students = <?php echo $search_students; ?>	//console.log(window.location.href.indexOf("<?php echo url('/prospectives') ?>"));		if (window.location.href.indexOf("<?php echo url('/prospectives') ?>") !== -1 && students==1) {	  window.location = "<?php echo url('/prospectives') ?>#div-focus";	}			    $("#request_students").click(function(){ 		console.log('test');	        $("#frmStudents").submit(); // Submit the form    });});$("input[name='chkStudentId[]']").click(function(e) {	/* console.log(e);	var s_length = $("#student_length").val();	if(s_length>5){		alert('You can not select more than five students');		e.preventDefault();		e.stopPropagation();	} */	}); function selectedStudents(){	var favorite = [];	$.each($("input[name='chkStudentId[]']:checked"), function(e){		favorite.push($(this).val());	});	var student_length = favorite.length;	$("#student_length").val(student_length);	}</script>@endsection